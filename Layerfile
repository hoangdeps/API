# Sử dụng Ubuntu minimal base image
FROM ubuntu:20.04

# Đặt biến môi trường để tránh yêu cầu tương tác khi cài đặt
ENV DEBIAN_FRONTEND=noninteractive

# Cập nhật hệ thống và cài đặt các gói cần thiết
RUN apt-get update -y && apt-get install -y --no-install-recommends \
    bash curl git python3-pip tmux htop speedtest-cli zip screen ca-certificates gnupg lsb-release \
    && curl -sL https://deb.nodesource.com/setup_20.x | bash - \
    && apt-get install -y nodejs docker-ce docker-ce-cli containerd.io \
    && pip3 install requests python-telegram-bot pytz termcolor psutil \
    && npm install colors set-cookie-parser request axios hpack https commander socks chalk chalk@2 \
    && npm install express \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*

# Sao chép toàn bộ nội dung từ thư mục hiện tại vào container
COPY . .

# Mở cổng 80
EXPOSE 80

# Lệnh chạy ứng dụng Node.js
CMD ["node", "api.js"]
